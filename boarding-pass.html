<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Airlines - 登机牌</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', 'Consolas', monospace;
            background: #e8edf1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        /* 窄版横版登机牌 */
        .boarding-pass {
            background: white;
            width: 100%;
            max-width: 500px; /* 比之前窄 */
            min-height: 200px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-radius: 4px;
            display: flex;
            margin: 20px 0;
        }
        
        /* 左侧信息区 */
        .left-section {
            flex: 2;
            padding: 15px;
            border-right: 2px dashed #ccc;
        }
        
        /* 右侧登机信息区 */
        .right-section {
            flex: 1;
            padding: 15px;
            background: #f8f9fa;
        }
        
        /* 顶部航空公司信息 */
        .airline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .airline-name {
            font-size: 18px;
            font-weight: bold;
            color: #003366;
        }
        
        .boarding-pass-label {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* 乘客信息 - 紧凑 */
        .passenger-info {
            margin-bottom: 15px;
        }
        
        .passenger-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 3px;
        }
        
        .ticket-type {
            font-size: 10px;
            color: #666;
        }
        
        /* 航班主要信息 - 紧凑布局 */
        .flight-details {
            margin-bottom: 15px;
        }
        
        .flight-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
        }
        
        .flight-label {
            color: #666;
            min-width: 80px;
        }
        
        .flight-value {
            font-weight: bold;
            color: #333;
            text-align: right;
        }
        
        /* 行程信息 - 简洁 */
        .route-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .airport {
            text-align: center;
        }
        
        .airport-code {
            font-size: 20px;
            font-weight: bold;
            color: #003366;
        }
        
        .airport-name {
            font-size: 10px;
            color: #666;
            margin-top: 2px;
        }
        
        .arrow {
            font-size: 16px;
            color: #003366;
            padding: 0 10px;
        }
        
        /* 条形码区域 - 紧凑 */
        .barcode-area {
            margin-top: 15px;
            text-align: center;
        }
        
        .barcode {
            width: 100%;
            height: 40px;
            background: white;
            border: 1px solid #ddd;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .barcode-text {
            font-size: 8px;
            color: #666;
            letter-spacing: 0.5px;
        }
        
        /* 右侧登机信息 - 简洁 */
        .boarding-header {
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .flight-number {
            font-size: 14px;
            font-weight: bold;
            color: #003366;
        }
        
        .boarding-items {
            margin-bottom: 15px;
        }
        
        .boarding-item {
            margin-bottom: 10px;
        }
        
        .boarding-label {
            font-size: 9px;
            color: #666;
            margin-bottom: 2px;
            text-transform: uppercase;
        }
        
        .boarding-value {
            font-size: 18px;
            font-weight: bold;
            color: #003366;
        }
        
        /* 登机时间 - 突出但简洁 */
        .boarding-time {
            text-align: center;
            padding: 10px;
            background: #003366;
            color: white;
            border-radius: 4px;
            margin-top: 10px;
        }
        
        .time-label {
            font-size: 9px;
            opacity: 0.9;
            margin-bottom: 3px;
        }
        
        .time-value {
            font-size: 18px;
            font-weight: bold;
        }
        
        /* 底部重要提示 */
        .important-notice {
            font-size: 8px;
            color: #666;
            line-height: 1.3;
            margin-top: 10px;
            padding-top: 8px;
            border-top: 1px solid #eee;
        }
        
        /* 操作按钮 */
        .action-buttons {
            display: flex;
            gap: 10px;
            width: 100%;
            max-width: 500px;
            margin-top: 20px;
        }
        
        .action-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 4px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .print-btn {
            background: #28a745;
            color: white;
        }
        
        .print-btn:hover {
            background: #218838;
        }
        
        .back-btn {
            background: #6c757d;
            color: white;
        }
        
        .back-btn:hover {
            background: #5a6268;
        }
        
        /* 打印优化 */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .action-buttons {
                display: none;
            }
            
            .boarding-pass {
                box-shadow: none;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>
    <div class="boarding-pass">
        <!-- 左侧：主要信息 -->
        <div class="left-section">
            <!-- 航空公司标题 -->
            <div class="airline-header">
                <div class="airline-name">TRAVEL AIRLINES</div>
                <div class="boarding-pass-label">BOARDING PASS</div>
            </div>
            
            <!-- 乘客信息 -->
            <div class="passenger-info">
                <div class="passenger-name" id="passengerName">-</div>
                <div class="ticket-type">Electronic Ticket</div>
            </div>
            
            <!-- 航班信息 -->
            <div class="flight-details">
                <div class="flight-row">
                    <div class="flight-label">Flight:</div>
                    <div class="flight-value" id="flightNumber">AA0011</div>
                </div>
                <div class="flight-row">
                    <div class="flight-label">Date:</div>
                    <div class="flight-value" id="flightDate">-</div>
                </div>
                <div class="flight-row">
                    <div class="flight-label">From:</div>
                    <div class="flight-value" id="departureCity">-</div>
                </div>
                <div class="flight-row">
                    <div class="flight-label">To:</div>
                    <div class="flight-value" id="arrivalCity">-</div>
                </div>
            </div>
            
            <!-- 行程信息 -->
            <div class="route-info">
                <div class="airport">
                    <div class="airport-code" id="departureCode">-</div>
                    <div class="airport-name" id="departureAirport">-</div>
                </div>
                <div class="arrow">→</div>
                <div class="airport">
                    <div class="airport-code" id="arrivalCode">-</div>
                    <div class="airport-name" id="arrivalAirport">-</div>
                </div>
            </div>
            
            <!-- 条形码 -->
            <div class="barcode-area">
                <div class="barcode" id="barcodeContainer">
                    <!-- 条形码会在这里生成 -->
                </div>
                <div class="barcode-text">Scan at gate</div>
            </div>
        </div>
        
        <!-- 右侧：登机信息 -->
        <div class="right-section">
            <div class="boarding-header">
                <div class="flight-number" id="displayFlightNumber">FLIGHT AA0011</div>
            </div>
            
            <!-- 登机详细信息 -->
            <div class="boarding-items">
                <div class="boarding-item">
                    <div class="boarding-label">Gate</div>
                    <div class="boarding-value" id="gateNumber">A3</div>
                </div>
                <div class="boarding-item">
                    <div class="boarding-label">Seat</div>
                    <div class="boarding-value" id="seatNumber">22B</div>
                </div>
                <div class="boarding-item">
                    <div class="boarding-label">Seq</div>
                    <div class="boarding-value" id="sequenceNumber">045</div>
                </div>
            </div>
            
            <!-- 登机时间 -->
            <div class="boarding-time">
                <div class="time-label">Boarding Time</div>
                <div class="time-value" id="boardingTime">14:00</div>
            </div>
            
            <!-- 重要提示 -->
            <div class="important-notice">
                Boarding gate closes 15 mins before departure
            </div>
        </div>
    </div>
    
    <!-- 操作按钮 -->
    <div class="action-buttons">
        <button onclick="window.print()" class="action-btn print-btn">Print</button>
        <button onclick="goBack()" class="action-btn back-btn">Back to Home</button>
    </div>

    <script>
        // 机场信息
        const airports = {
            '北京': { code: 'PEK', name: 'Beijing Capital' },
            '上海': { code: 'SHA', name: 'Shanghai Hongqiao' },
            '广州': { code: 'CAN', name: 'Guangzhou Baiyun' },
            '深圳': { code: 'SZX', name: 'Shenzhen Baoan' },
            '成都': { code: 'CTU', name: 'Chengdu Shuangliu' },
            '重庆': { code: 'CKG', name: 'Chongqing Jiangbei' },
            '杭州': { code: 'HGH', name: 'Hangzhou Xiaoshan' },
            '南京': { code: 'NKG', name: 'Nanjing Lukou' },
            '武汉': { code: 'WUH', name: 'Wuhan Tianhe' },
            '西安': { code: 'XIY', name: "Xi'an Xianyang" }
        };
        
        // 从URL获取参数
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                name: params.get('name') || 'Passenger',
                from: params.get('from') || 'Beijing',
                to: params.get('to') || 'Shanghai'
            };
        }
        
        // 页面加载时生成登机牌
        document.addEventListener('DOMContentLoaded', function() {
            const params = getUrlParams();
            
            // 设置乘客姓名
            document.getElementById('passengerName').textContent = params.name.toUpperCase();
            
            // 获取机场信息
            const fromAirport = airports[params.from] || { 
                code: params.from.substring(0, 3).toUpperCase(), 
                name: params.from
            };
            
            const toAirport = airports[params.to] || { 
                code: params.to.substring(0, 3).toUpperCase(), 
                name: params.to
            };
            
            // 设置城市信息
            document.getElementById('departureCity').textContent = params.from;
            document.getElementById('arrivalCity').textContent = params.to;
            
            // 设置机场信息
            document.getElementById('departureCode').textContent = fromAirport.code;
            document.getElementById('departureAirport').textContent = fromAirport.name;
            document.getElementById('arrivalCode').textContent = toAirport.code;
            document.getElementById('arrivalAirport').textContent = toAirport.name;
            
            // 生成航班信息
            generateFlightInfo(params.name, fromAirport.code, toAirport.code);
            
            // 生成条形码
            generateBarcode(params.name, fromAirport.code, toAirport.code);
        });
        
        // 生成航班信息
        function generateFlightInfo(name, fromCode, toCode) {
            // 明天日期
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            const flightDate = `${tomorrow.getFullYear()}/${(tomorrow.getMonth()+1).toString().padStart(2,'0')}/${tomorrow.getDate().toString().padStart(2,'0')}`;
            document.getElementById('flightDate').textContent = flightDate;
            
            // 航班号
            const flightNumber = fromCode.charAt(0) + toCode.charAt(0) + 
                Math.floor(Math.random() * 1000).toString().padStart(3, '0');
            document.getElementById('flightNumber').textContent = flightNumber;
            document.getElementById('displayFlightNumber').textContent = `FLIGHT ${flightNumber}`;
            
            // 随机登机口
            const gates = ['A3', 'B12', 'C7', 'D5'];
            const gate = gates[Math.floor(Math.random() * gates.length)];
            document.getElementById('gateNumber').textContent = gate;
            
            // 随机座位
            const rows = Math.floor(Math.random() * 30) + 10;
            const seats = ['A', 'B', 'C', 'D', 'E', 'F'];
            const seat = seats[Math.floor(Math.random() * seats.length)];
            document.getElementById('seatNumber').textContent = `${rows}${seat}`;
            
            // 随机序号
            const seq = Math.floor(Math.random() * 200).toString().padStart(3, '0');
            document.getElementById('sequenceNumber').textContent = seq;
            
            // 登机时间
            const now = new Date();
            now.setHours(now.getHours() + 2);
            const boardingTime = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            document.getElementById('boardingTime').textContent = boardingTime;
        }
        
        // 生成条形码
        function generateBarcode(name, from, to) {
            const barcodeContainer = document.getElementById('barcodeContainer');
            const barcodeData = `BP:${name}:${from}-${to}:${Date.now()}`;
            
            // 使用在线条形码生成API
            barcodeContainer.innerHTML = `
                <img src="https://bwipjs-api.metafloor.com/?bcid=code128&text=${encodeURIComponent(barcodeData)}&scale=1&includetext&height=30&width=200"
                     alt="Boarding Pass Barcode"
                     style="width: 100%; height: 30px; object-fit: contain;">
            `;
        }
        
        // 返回首页
        function goBack() {
            window.location.href = 'index.html';
        }
        
        // 打印完成提示
        window.addEventListener('afterprint', function() {
            alert('Print completed! Please keep your boarding pass safe.');
        });
    </script>
</body>
</html>