<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>手机专用 · 图片保证显示 · 按钮可点</title>
    <style>
        /* 极简 · 移动端优先 · 100%显示图片 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            background-color: #000;
            font-family: system-ui, -apple-system, 'Helvetica Neue', sans-serif;
        }

        /* 图片容器 */
        .image-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow: hidden;
            background-color: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* img 元素样式 */
        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            display: block;
        }

        /* 加载中的占位文字（纯色，无文字，只有背景） */
        .image-container.loading {
            background-color: #2a2a2a;
        }

        /* 按钮容器 */
        .button-wrapper {
            position: absolute;
            bottom: 15%;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 20;
            pointer-events: none;
        }

        /* 手机大按钮 */
        .btn-down {
            pointer-events: auto;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            color: white;
            font-size: 2rem;
            font-weight: 350;
            letter-spacing: 6px;
            padding: 1rem 3rem;
            border-radius: 70px;
            box-shadow: 0 8px 28px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            transition: all 0.2s ease;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            line-height: 1.2;
            min-width: 260px;
            text-align: center;
            border: 1.5px solid rgba(255, 255, 255, 0.6);
            -webkit-touch-callout: none;
            user-select: none;
            z-index: 30;
        }

        .btn-down:active {
            transform: scale(0.95);
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(255, 255, 255, 0.9);
        }

        @media (max-width: 400px) {
            .btn-down {
                font-size: 1.8rem;
                padding: 0.9rem 2.5rem;
                min-width: 230px;
            }
        }

        @media (orientation: landscape) and (max-height: 500px) {
            .button-wrapper {
                bottom: 18%;
            }
            .btn-down {
                font-size: 1.8rem;
                padding: 0.7rem 2.8rem;
            }
        }
    </style>
</head>
<body>

    <!-- 图片容器 -->
    <div class="image-container" id="imageContainer">
        <img id="mainImage" src="" alt="" style="display: none;">
    </div>

    <!-- 按钮 -->
    <div class="button-wrapper">
        <button class="btn-down" id="magicButton">点一下我</button>
    </div>

    <script>
        (function() {
            const container = document.getElementById('imageContainer');
            const img = document.getElementById('mainImage');
            const btn = document.getElementById('magicButton');
            
            // ========== 图片地址列表（按优先级排序）==========
            // 使用多种可能的图片地址，确保手机能显示
            const imageUrls = [
                // 1. 使用原始github raw地址（最直接）
                'https://raw.githubusercontent.com/g2710068621-gif/virtual-plane-system/main/test2.jpg',
                
                // 2. 使用jsdelivr CDN（加速且稳定）
                'https://cdn.jsdelivr.net/gh/g2710068621-gif/virtual-plane-system@main/test2.jpg',
                
                // 3. 使用github页面地址（备用）
                'https://github.com/g2710068621-gif/virtual-plane-system/blob/main/test2.jpg?raw=true',
                
                // 4. 使用镜像加速（如果上面都失败）
                'https://ghproxy.com/https://raw.githubusercontent.com/g2710068621-gif/virtual-plane-system/main/test2.jpg',
                
                // 5. 最后备用：一个纯色背景（无图模式）
                ''
            ];
            
            let currentIndex = 0;
            
            // 显示加载状态（无文字，只有深色背景）
            container.classList.add('loading');
            
            // 尝试加载图片的函数
            function tryLoadImage(index) {
                if (index >= imageUrls.length - 1) {
                    // 所有图片地址都失败，显示纯色背景（无图模式）
                    console.log('所有图片地址均失败，使用纯色背景');
                    container.classList.remove('loading');
                    container.style.backgroundColor = '#2a2a2a'; // 深灰色背景
                    img.style.display = 'none';
                    
                    // 图片完全失败，但按钮仍然可用
                    return;
                }
                
                const url = imageUrls[index];
                if (!url) {
                    // 空地址，尝试下一个
                    tryLoadImage(index + 1);
                    return;
                }
                
                console.log('尝试加载图片: ' + url);
                
                // 创建新的Image对象测试加载
                const testImg = new Image();
                testImg.src = url + '?t=' + new Date().getTime(); // 加时间戳防止缓存
                
                testImg.onload = function() {
                    // 加载成功，显示图片
                    console.log('图片加载成功: ' + url);
                    img.src = url;
                    img.style.display = 'block';
                    container.classList.remove('loading');
                    container.style.backgroundColor = ''; // 恢复默认
                    
                    // 额外确保图片显示
                    img.onload = function() {
                        console.log('图片已显示');
                    };
                };
                
                testImg.onerror = function() {
                    // 加载失败，尝试下一个
                    console.log('图片加载失败: ' + url);
                    tryLoadImage(index + 1);
                };
            }
            
            // 开始尝试加载图片
            tryLoadImage(0);
            
            // 额外的重试机制：如果5秒后图片仍未显示，尝试下一个地址
            setTimeout(function() {
                if (!img.complete || img.naturalHeight === 0) {
                    console.log('超时检测，尝试下一个地址');
                    // 获取当前尝试的索引，然后尝试下一个
                    const nextIndex = currentIndex + 1;
                    if (nextIndex < imageUrls.length) {
                        tryLoadImage(nextIndex);
                    }
                }
            }, 5000);
            
            // ========== 按钮点击跳转 ==========
            btn.disabled = false;
            
            // 跳转目标
            const targetUrl = 'boarding-pass.html';
            
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('按钮被点击');
                
                // 微缩动画
                btn.style.transform = 'scale(0.94)';
                btn.style.background = 'rgba(255, 255, 255, 0.4)';
                
                // 动画完成后跳转
                setTimeout(() => {
                    window.location.href = targetUrl;
                    console.log('正在跳转到 ' + targetUrl);
                }, 150);
            });
            
            // 移动端触摸事件优化
            btn.addEventListener('touchstart', function(e) {
                e.preventDefault();
            }, { passive: false });
            
            // 额外保险：touchend 直接跳转（防止某些设备click不触发）
            btn.addEventListener('touchend', function(e) {
                e.preventDefault();
                window.location.href = targetUrl;
            });
            
            console.log('页面加载完成，按钮已绑定事件');
        })();
    </script>
</body>
</html>