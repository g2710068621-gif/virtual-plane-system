<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ æƒŠå–œç¤¼ç‰©æ‰è½ Â· ç™»æœºå£</title>
    <style>
        /* -----------------------------------------------
           å…¨å±€æµªæ¼«æƒŠå–œæ°›å›´ Â· åŠ¨æ€ç¤¼ç‰©é›¨ + ç™»æœºæŒ‰é’®
        ----------------------------------------------- */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: radial-gradient(circle at 20% 30%, #1e1a3a, #0e0b1f);
            font-family: 'Poppins', 'Segoe UI', system-ui, -apple-system, sans-serif;
            height: 100vh;
            width: 100vw;
            overflow: hidden;          /* éšè—æ»šåŠ¨æ¡ï¼Œå…¨å±é£˜è½ */
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        /* ----- ä¸»å¡ç‰‡ï¼šæƒŠå–œæ ‡é¢˜ + æŒ‰é’®ï¼ˆé€šå¾€boarding-passï¼‰----- */
        .surprise-card {
            background: rgba(20, 15, 45, 0.55);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border-radius: 56px 24px 56px 24px;
            border: 2px solid rgba(255, 215, 150, 0.5);
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.7), 0 0 35px rgba(255, 200, 80, 0.4);
            padding: 3rem 3.5rem;
            text-align: center;
            z-index: 30;              /* æµ®åœ¨ç¤¼ç‰©ä¸Šæ–¹ï¼Œä½†åŠé€æ˜èƒŒæ™¯ä¸é®æŒ¡è§†çº¿ */
            max-width: 750px;
            margin: 0 24px;
            animation: cardBreath 3.2s infinite alternate ease-in-out;
        }

        @keyframes cardBreath {
            0%   { box-shadow: 0 25px 45px rgba(0,0,0,0.7), 0 0 30px rgba(255,180,60,0.3); border-color: rgba(255, 220, 150, 0.5); }
            100% { box-shadow: 0 30px 60px rgba(0,0,0,0.9), 0 0 55px rgba(255, 200, 0, 0.7); border-color: rgba(255, 245, 200, 0.9); }
        }

        h1 {
            font-size: 4.8rem;
            font-weight: 700;
            letter-spacing: 6px;
            margin-bottom: 0.6rem;
            text-shadow: 0 0 20px #ffb347, 0 0 40px #ff8800, 0 0 80px #ff5500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        h1 span {
            background: rgba(255, 200, 0, 0.18);
            padding: 0 16px;
            border-radius: 120px;
            backdrop-filter: blur(5px);
        }

        .dynamic-tagline {
            font-size: 2.1rem;
            font-weight: 300;
            margin-bottom: 1.8rem;
            color: #ffebc2;
            min-height: 4.2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            text-shadow: 0 0 6px #ffaa33;
        }

        /* ---------- ç™»æœºæŒ‰é’® Â· æ‰“å¼€ -> boarding-pass.html ---------- */
        .btn-boarding {
            background: radial-gradient(circle at 35% 25%, #ffdb7c, #ffb347);
            border: none;
            padding: 1.4rem 3.5rem;
            font-size: 2rem;
            font-weight: 700;
            border-radius: 80px;
            color: #1f1307;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 18px;
            box-shadow: 0 12px 0 #9e5816, 0 18px 45px rgba(255, 140, 0, 0.6);
            transition: all 0.14s ease;
            cursor: pointer;
            border: 3px solid #fff1cf;
            margin-top: 1.2rem;
            letter-spacing: 5px;
            text-decoration: none;    /* ç”¨äºé“¾æ¥ */
        }

        .btn-boarding:hover {
            transform: translateY(8px);
            box-shadow: 0 4px 0 #9e5816, 0 28px 50px rgba(255, 160, 0, 0.8);
            background: radial-gradient(circle at 35% 25%, #ffe9a0, #ffb85c);
        }

        .btn-boarding:active {
            transform: translateY(14px);
            box-shadow: 0 0 0 #9e5816, 0 30px 55px rgba(255, 120, 0, 0.9);
        }

        /* ä¸ºäº†è®©aæ ‡ç­¾å’ŒæŒ‰é’®æ ·å¼å®Œç¾èåˆ */
        .btn-link {
            text-decoration: none;
            color: inherit;
            display: inline-flex;
            align-items: center;
            gap: 18px;
        }

        /* å®æ—¶é£˜è½è®¡æ•°å™¨ */
        .gift-stats {
            margin-top: 2rem;
            font-size: 1.35rem;
            background: rgba(10, 5, 20, 0.6);
            padding: 0.7rem 2rem;
            border-radius: 60px;
            display: inline-block;
            backdrop-filter: blur(6px);
            border: 1px dashed rgba(255, 245, 150, 0.8);
            color: #ffefc0;
        }

        /* ---------- åŠ¨æ€ç¤¼ç‰©æ‰è½ç”»å¸ƒ ---------- */
        .gift-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;      /* ç‚¹å‡»ç©¿é€ï¼ŒæŒ‰é’®å¯ç‚¹ */
            z-index: 10;
            overflow: hidden;
        }

        /* æ¯ä¸ªæ‰è½ç¤¼ç‰© â€”â€” æ´»æ³¼çš„åŠ¨ç”» */
        .gift-item {
            position: absolute;
            top: -80px;
            font-size: 2.8rem;
            will-change: transform;
            pointer-events: none;
            filter: drop-shadow(0 12px 10px rgba(0,0,0,0.5));
            animation: floatSide 5s infinite ease-in-out;
            white-space: nowrap;
            z-index: 15;
            opacity: 0.96;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
        }

        /* å·¦å³æ¼‚æµ®åŠ¨ç”» */
        @keyframes floatSide {
            0%   { transform: translateX(0px) rotate(0deg); }
            30%  { transform: translateX(14px) rotate(6deg); }
            70%  { transform: translateX(-10px) rotate(-4deg); }
            100% { transform: translateX(0px) rotate(0deg); }
        }

        /* ä¸åŒå°ºå¯¸ */
        .gift-item.size-xs    { font-size: 1.6rem; }
        .gift-item.size-small { font-size: 2.2rem; }
        .gift-item.size-medium{ font-size: 3.0rem; }
        .gift-item.size-large { font-size: 4.0rem; }
        .gift-item.shimmer    { filter: drop-shadow(0 0 15px gold); }

        /* é—ªçƒæ˜Ÿæ˜Ÿ â€”â€” æµªæ¼«èƒŒæ™¯ */
        .star-twinkle {
            position: absolute;
            color: rgba(255, 255, 200, 0.9);
            font-size: 1.5rem;
            animation: twinkle 2.4s infinite alternate;
            pointer-events: none;
            z-index: 5;
        }

        @keyframes twinkle {
            0%   { opacity: 0.2; transform: scale(0.7); text-shadow: 0 0 5px #fff0b0; }
            100% { opacity: 1; transform: scale(1.3); text-shadow: 0 0 18px #fffde7; }
        }

        /* ç½²å */
        .credit {
            position: absolute;
            bottom: 18px;
            right: 28px;
            color: rgba(255, 240, 200, 0.55);
            font-size: 0.95rem;
            z-index: 50;
            backdrop-filter: blur(4px);
            padding: 6px 18px;
            border-radius: 40px;
            background: rgba(0,0,0,0.2);
            letter-spacing: 2px;
        }

        /* å“åº”å¼ */
        @media (max-width: 560px) {
            h1 { font-size: 3.2rem; }
            .dynamic-tagline { font-size: 1.6rem; }
            .surprise-card { padding: 2rem 1.8rem; }
            .btn-boarding { font-size: 1.6rem; padding: 1.1rem 2.2rem; }
        }
    </style>
</head>
<body>

    <!-- ******** ä¸»è§†è§‰å¡ç‰‡ï¼šæƒŠå–œç¤¼ç‰©æ‰è½ + â€œæ‰“å¼€â€æŒ‰é’®ï¼ˆç™»æœºç‰Œå…¥å£ï¼‰ ******** -->
    <div class="surprise-card">
        <h1>
            <span>ğŸ</span> æƒŠå–œ <span>âœˆï¸</span>
        </h1>
        <!-- åŠ¨æ€æ–‡æ¡ˆï¼šå‘¼åº”ç¤¼ç‰©æ‰è½ä¸æ—…ç¨‹ -->
        <div class="dynamic-tagline" id="dynamicPhrase">
            ğŸ« ç¤¼ç‰©æ­£åœ¨é£˜è½ Â· å‡†å¤‡ç™»æœº ğŸ«
        </div>

        <!-- 
            â€œæ‰“å¼€â€ æŒ‰é’® â€”â€” è¿æ¥åˆ° boarding-pass.html 
            çœŸæ­£çš„é“¾æ¥ï¼Œç‚¹å‡»å³è·³è½¬ã€‚ä¿ç•™å®Œæ•´æŒ‰é’®æ ·å¼ã€‚
        -->
        <div class="btn-boarding">
            <a href="boarding-pass.html" class="btn-link" id="boardingLink">
                <span>ğŸ§¾</span> æ‰“å¼€ <span>ğŸŸï¸</span>
            </a>
        </div>

        <!-- å®æ—¶æ˜¾ç¤ºå½“å‰é£˜è½çš„ç¤¼ç‰©æ•°é‡ï¼Œå¢åŠ åŠ¨æ€æ„Ÿ -->
        <div class="gift-stats">
            ğŸ å·²æ‰è½ <span id="giftCountDisplay">0</span> ä»¶æƒŠå–œ
        </div>
    </div>

    <!-- ******** åŠ¨æ€ç¤¼ç‰©ç”»å¸ƒï¼šæ‰€æœ‰é£˜è½ç¤¼ç‰© & é—ªçƒæ˜Ÿæ˜Ÿ ******** -->
    <div class="gift-canvas" id="giftCanvas">
        <!-- é¢„è®¾å‡ é¢—é—ªçƒæ˜Ÿï¼Œå¢åŠ å±‚æ¬¡ -->
        <div class="star-twinkle" style="top: 15%; left: 6%;">âœ¨</div>
        <div class="star-twinkle" style="top: 72%; left: 20%;">ğŸŒŸ</div>
        <div class="star-twinkle" style="top: 40%; left: 86%;">ğŸ’«</div>
        <div class="star-twinkle" style="top: 83%; left: 68%;">â­</div>
        <div class="star-twinkle" style="top: 27%; left: 44%;">âœ¨</div>
    </div>

    <div class="credit">
        ğŸ æ‰è½ä¸åœ Â· å³åˆ»ç™»æœº ğŸ«
    </div>

    <script>
        (function() {
            "use strict";

            // ---------- æƒŠå–œç¤¼ç‰©æ‰è½æ ¸å¿ƒå¼•æ“ ----------
            const canvas = document.getElementById('giftCanvas');
            // å­˜å‚¨å½“å‰æ‰€æœ‰ç¤¼ç‰©å…ƒç´ 
            let giftElements = [];

            // ä¸°å¯Œç¤¼ç‰©å›¾æ ‡ â€”â€” åŠ å…¥æ—…è¡Œ/ç™»æœºå°å…ƒç´ ï¼Œå‘¼åº”â€œboarding-passâ€
            const giftIcons = [
                'ğŸ', 'ğŸ“¦', 'ğŸ€', 'ğŸ§¸', 'ğŸ¬', 'ğŸ­', 'ğŸˆ', 'ğŸ§§', 
                'ğŸ’', 'ğŸ„', 'ğŸŒŸ', 'âœ¨', 'ğŸ‚', 'ğŸ«', 'ğŸ†', 'ğŸ‘‘',
                'ğŸ’', 'ğŸ”®', 'ğŸ§', 'ğŸ¥‚', 'ğŸ¨', 'ğŸª…', 'ğŸª†', 'ğŸ’Œ',
                // å¢åŠ ç™»æœº/æ—…è¡Œç›¸å…³æƒŠå–œ
                'âœˆï¸', 'ğŸ§¾', 'ğŸ«', 'ğŸ§³', 'ğŸ—ºï¸', 'ğŸ§­', 'ğŸš‚', 'ğŸ›³ï¸'
            ];

            // åŠ¨æ€æ–‡æ¡ˆ (åŠ å…¥ç™»æœº/æ—…è¡Œçš„æ°›å›´)
            const phraseList = [
                'ğŸ ç¤¼ç‰©ä¸æœºç¥¨ä¸€åŒé£˜è½', 
                'âœ¨ å‰æ–¹ç™»æœºå£ Â· æƒŠå–œä¸æ–­', 
                'ğŸª„ æ‹¾å–ä½ çš„ç™»æœºç‰Œ', 
                'ğŸ’– ä¸“å±èˆªç­å³å°†å‡ºå‘', 
                'ğŸ€ å¹¸è¿ç¤¼ç‰©ä¼´ä½ é£è¡Œ',
                'ğŸŒŸ ä»Šæ—¥æƒŠå–œå·²å°±ç»ª',
                'ğŸˆ å®ï¼ç¤¼ç‰©ä¸ç™»æœºä¿¡',
                'ğŸ§¸ å°ç†Šæœºé•¿é€ä½ ç¤¼ç‰©',
                'ğŸ­ ç”œèœœæ—…é€”æ‰è½',
                'ğŸ€ å¤´ç­‰èˆ±æƒŠå–œ',
                'âœˆï¸  boarding-pass ç­‰å€™',
                'ğŸ§¾ æ‰“å¼€ç™»æœºç‰Œå‡ºå‘'
            ];

            // æ˜¾ç¤ºç¤¼ç‰©æ•°é‡çš„span
            const giftCountSpan = document.getElementById('giftCountDisplay');
            const dynamicPhraseEl = document.getElementById('dynamicPhrase');

            // æ‰è½é€Ÿåº¦æ§åˆ¶ (åŸºç¡€: æ¯ç§’çº¦2.3ä¸ª)
            let dropRate = 2.3;         
            const BASE_DROP_RATE = 2.3;
            // æ²¡æœ‰ä»»ä½•åŠ é€Ÿå¹²æ‰°ï¼Œä¿æŒå¹³ç¨³æ‰è½å³å¯

            // ---------- æ˜Ÿæ˜Ÿç”Ÿæˆå™¨ (æµªæ¼«æ°›å›´) ----------
            function initStars() {
                // é¢å¤–ç”Ÿæˆ12é¢—æ˜Ÿæ˜Ÿæ•£è½å„å¤„
                for (let i = 0; i < 14; i++) {
                    createStar();
                }
                // æ¯3.5ç§’è¡¥å……ä¸€é¢—æ–°çš„é—ªçƒæ˜Ÿæ˜Ÿ
                setInterval(() => {
                    createStar();
                    // é¿å…æ˜Ÿæ˜Ÿæ— é™å¢åŠ ï¼Œä¿ç•™æœ€å¤š35é¢—
                    const allStars = document.querySelectorAll('.star-twinkle');
                    if (allStars.length > 40) {
                        for (let i = 0; i < 10; i++) {
                            if (allStars[i]) allStars[i].remove();
                        }
                    }
                }, 3500);
            }

            // åˆ›é€ ä¸€é¢—é—ªçƒæ˜Ÿæ˜Ÿ
            function createStar() {
                if (!canvas) return;
                const star = document.createElement('div');
                star.className = 'star-twinkle';
                const emojiSet = ['âœ¨', 'ğŸŒŸ', 'â­', 'ğŸ’«', 'âœ¨', 'âš¡', 'â„ï¸', 'ğŸƒ', 'ğŸ•Šï¸'];
                star.textContent = emojiSet[Math.floor(Math.random() * emojiSet.length)];
                star.style.left = Math.random() * 96 + '%';
                star.style.top = Math.random() * 94 + '%';
                star.style.fontSize = (1.2 + Math.random() * 2) + 'rem';
                star.style.animationDelay = (Math.random() * 4) + 's';
                star.style.opacity = 0.5 + Math.random() * 0.5;
                canvas.appendChild(star);
                // æ˜Ÿæ˜Ÿç”Ÿå‘½å‘¨æœŸï¼š12ç§’åä¼˜é›…æ¶ˆå¤±
                setTimeout(() => {
                    if (star.parentNode) star.remove();
                }, 12000);
            }

            // ---------- ç”Ÿæˆä¸€ä¸ªæ–°ç¤¼ç‰© ----------
            function createGift() {
                if (!canvas) return;
                const gift = document.createElement('div');
                gift.className = 'gift-item';

                // éšæœºå›¾æ ‡
                const randomIcon = giftIcons[Math.floor(Math.random() * giftIcons.length)];
                gift.textContent = randomIcon;

                // éšæœºå°ºå¯¸
                const sizeRand = Math.random();
                if (sizeRand < 0.2) {
                    gift.classList.add('size-xs');
                } else if (sizeRand < 0.5) {
                    gift.classList.add('size-small');
                } else if (sizeRand < 0.8) {
                    gift.classList.add('size-medium');
                } else {
                    gift.classList.add('size-large');
                }

                // å¶å°”é—ªçƒé‡‘è‰²å…‰èŠ’
                if (Math.random() > 0.55) {
                    gift.classList.add('shimmer');
                }

                // æ°´å¹³ä½ç½®éšæœº (0~95%)
                gift.style.left = Math.random() * 92 + '%';
                // èµ·å§‹å‚ç›´ä½ç½®: ä¸åŒè´Ÿå€¼ï¼Œé”™è½å…¥åœº
                gift.style.top = `-${60 + Math.random() * 80}px`;
                // ä¸‹è½é€Ÿåº¦ (åƒç´ /å¸§)  0.6 ~ 2.1
                const speed = 0.65 + Math.random() * 1.5;
                gift.dataset.speed = speed;

                // è®°å½•å½“å‰Y (px)
                let initialTop = parseFloat(gift.style.top);
                gift.currentY = isNaN(initialTop) ? -70 : initialTop;

                canvas.appendChild(gift);
                giftElements.push(gift);

                // æ›´æ–°è®¡æ•°å™¨
                updateGiftCounter();
            }

            // ---------- ç§»é™¤è¶…å‡ºå±å¹•çš„ç¤¼ç‰© ----------
            function removeOffscreenGifts() {
                giftElements = giftElements.filter(gift => {
                    if (!gift || !gift.parentNode) return false;
                    let topStr = gift.style.top;
                    let topVal = parseFloat(topStr);
                    if (isNaN(topVal)) {
                        const computed = window.getComputedStyle(gift).top;
                        topVal = parseFloat(computed);
                    }
                    const winHeight = window.innerHeight;
                    if (topVal > winHeight + 130) {
                        if (gift.parentNode) gift.remove();
                        return false;
                    }
                    return true;
                });
            }

            // ---------- ç§»åŠ¨æ‰€æœ‰ç¤¼ç‰© (æ¯å¸§) ----------
            function moveGifts() {
                for (let gift of giftElements) {
                    if (!gift) continue;
                    let currentTop = parseFloat(gift.style.top);
                    if (isNaN(currentTop)) currentTop = -50;
                    const sp = parseFloat(gift.dataset.speed) || 0.9;
                    let newTop = currentTop + sp;
                    gift.style.top = newTop + 'px';
                }
                removeOffscreenGifts();
                updateGiftCounter();
            }

            // æ›´æ–°å±å¹•ä¸Šçš„ç¤¼ç‰©æ•°é‡æ˜¾ç¤º
            function updateGiftCounter() {
                if (giftCountSpan) {
                    giftCountSpan.textContent = giftElements.length;
                }
            }

            // åˆ‡æ¢åŠ¨æ€çŸ­è¯­
            function rotatePhrase() {
                if (!dynamicPhraseEl) return;
                const idx = Math.floor(Math.random() * phraseList.length);
                dynamicPhraseEl.textContent = phraseList[idx];
            }

            // ---------- ç¤¼ç‰©ç”Ÿæˆå¾ªç¯(åŸºäºdropRateæ¦‚ç‡) ----------
            function generatorLoop() {
                // æ¯ç§’ç”Ÿæˆ dropRate ä¸ª => æ¯å¸§æ¦‚ç‡ â‰ˆ dropRate / 60
                if (Math.random() < dropRate / 60) {
                    createGift();
                }
                // éšæœºæ›´æ–°çŸ­è¯­ (æ¦‚ç‡0.025/å¸§ â‰ˆ æ¯ç§’1.5æ¬¡)
                if (Math.random() < 0.025) {
                    rotatePhrase();
                }
                requestAnimationFrame(generatorLoop);
            }

            // ---------- ä½ç½®æ›´æ–°å¾ªç¯ ----------
            function animationLoop() {
                moveGifts();
                requestAnimationFrame(animationLoop);
            }

            // ---------- åˆå§‹åŒ–ä¸€åˆ‡ ----------
            function initApp() {
                // æ¸…ç©ºå¯èƒ½æ®‹ç•™ç¤¼ç‰©ï¼ˆä¿ç•™æ˜Ÿæ˜Ÿï¼‰
                const existingGifts = document.querySelectorAll('.gift-item');
                existingGifts.forEach(g => g.remove());
                giftElements = [];

                // è®¾å®šæ‰è½é€Ÿç‡
                dropRate = BASE_DROP_RATE;

                // é¢„ç”Ÿæˆ20ä¸ªç¤¼ç‰©ï¼Œè®©ç”»é¢ç«‹åˆ»ä¸°å¯Œ
                for (let i = 0; i < 22; i++) {
                    setTimeout(() => { createGift(); }, i * 20);
                }

                // åˆå§‹æ–‡æ¡ˆéšæœº
                rotatePhrase();

                // å¯åŠ¨æ˜Ÿæ˜ŸèƒŒæ™¯
                initStars();

                // å¯åŠ¨ä¸¤å¤§å¾ªç¯
                requestAnimationFrame(generatorLoop);
                requestAnimationFrame(animationLoop);
            }

            // é¡µé¢åŠ è½½å¯åŠ¨
            window.addEventListener('load', initApp);

            // ç¡®ä¿æŒ‰é’®é“¾æ¥æ­£å¸¸ï¼šä¿ç•™aæ ‡ç­¾çš„href="boarding-pass.html"ï¼Œæ— å¹²æ‰°
            // åŒæ—¶ä¸ºäº†æ›´å¥½çš„ä½“éªŒï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶ä¹Ÿä¼šè§¦å‘è½»å¾®çš„è§¦æ„Ÿï¼ˆæ— æ³•hapticä½†æ­£å¸¸è·³è½¬ï¼‰
            // æ— éœ€é¢å¤–ä»£ç ï¼Œé“¾æ¥çœŸå®æœ‰æ•ˆã€‚

            // æ¸…ç†æ½œåœ¨å®šæ—¶å™¨ (setIntervalåœ¨initStarsé‡Œ)
            window.addEventListener('beforeunload', function() {
                // æ²¡æœ‰ä¿ç•™é‡è¦å®šæ—¶å™¨å˜é‡ï¼Œä½†é¡µé¢å¸è½½æ—¶ä¼šè‡ªåŠ¨æ¸…é™¤ã€‚
            });

        })();
    </script>

    <!-- ä¿è¯gift-itemä½ç½®æ›´æ–°å‡†ç¡®ï¼Œæ— æ ·å¼å†²çª -->
    <style>
        .gift-canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
        .gift-item {
            position: absolute;
            user-select: none;
            pointer-events: none;
            transition: none;
        }
        .btn-link {
            width: 100%;
            height: 100%;
            justify-content: center;
        }
        /* ç¡®ä¿aæ ‡ç­¾å æ»¡æŒ‰é’® */
        .btn-boarding {
            padding: 0;           
        }
        .btn-link {
            padding: 1.4rem 3.5rem;
            border-radius: 80px;
            text-decoration: none;
            color: #1f1307;
            font-weight: 700;
        }
        @media (max-width: 560px) {
            .btn-link { padding: 1.1rem 2.2rem; }
        }
    </style>
</body>
</html>