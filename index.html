<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Airlines - 登机牌</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', 'Helvetica', sans-serif;
            background: #f0f0f0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .form-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
            margin-bottom: 30px;
        }
        
        .form-container h1 {
            text-align: center;
            color: #003366;
            margin-bottom: 25px;
            font-size: 24px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: bold;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }
        
        .submit-btn {
            width: 100%;
            padding: 15px;
            background: #003366;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .submit-btn:hover {
            background: #002244;
        }
        
        /* 真实机票样式 */
        .boarding-pass {
            background: white;
            width: 100%;
            max-width: 450px;
            border: 1px solid #ccc;
            position: relative;
            display: none;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            font-family: 'Courier New', monospace;
        }
        
        .boarding-pass.show {
            display: block;
        }
        
        /* 机票头部 - 航空公司区域 */
        .airline-header {
            background: #003366;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .airline-logo {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .airline-name {
            font-size: 28px;
            font-weight: bold;
            letter-spacing: 2px;
        }
        
        .boarding-pass-title {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        /* 乘客信息区域 */
        .passenger-info {
            padding: 25px;
            border-bottom: 1px solid #ddd;
        }
        
        .passenger-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .eticket {
            color: #666;
            font-size: 12px;
        }
        
        /* 航班信息 - 真实机票布局 */
        .flight-info-container {
            padding: 25px;
            border-bottom: 1px solid #ddd;
        }
        
        .flight-row {
            display: flex;
            margin-bottom: 20px;
        }
        
        .flight-info {
            flex: 1;
        }
        
        .info-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
        }
        
        .info-value {
            font-size: 20px;
            font-weight: bold;
        }
        
        /* 行程信息 */
        .route-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .airport {
            text-align: center;
            flex: 1;
        }
        
        .airport-code {
            font-size: 32px;
            font-weight: bold;
            color: #003366;
        }
        
        .airport-city {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .flight-arrow {
            font-size: 24px;
            color: #666;
            padding: 0 20px;
        }
        
        /* 登机信息 */
        .boarding-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 25px;
            border-bottom: 1px solid #ddd;
        }
        
        .boarding-item {
            text-align: center;
        }
        
        /* 条码和二维码区域 */
        .barcode-section {
            padding: 25px;
            text-align: center;
            background: #f8f9fa;
        }
        
        .barcode {
            height: 80px;
            background: #333;
            margin: 10px 0;
            position: relative;
        }
        
        .qrcode-container {
            margin: 25px 0;
        }
        
        .scan-text {
            font-size: 12px;
            color: #666;
            margin-top: 10px;
        }
        
        /* 操作按钮 */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            width: 100%;
            max-width: 450px;
        }
        
        .action-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        
        .save-btn {
            background: #28a745;
            color: white;
        }
        
        .new-btn {
            background: #dc3545;
            color: white;
        }
        
        /* 加载动画 */
        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #003366;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <h1>✈️ Travel Airlines</h1>
        <div class="form-group">
            <label for="name">乘客姓名</label>
            <input type="text" id="name" placeholder="请输入姓名" required>
        </div>
        
        <div class="form-group">
            <label for="fromCity">出发地</label>
            <input type="text" id="fromCity" placeholder="例如：北京" required>
        </div>
        
        <div class="form-group">
            <label for="toCity">目的地</label>
            <input type="text" id="toCity" placeholder="例如：上海" required>
        </div>
        
        <button id="submitBtn" class="submit-btn">生成登机牌</button>
    </div>
    
    <!-- 加载中 -->
    <div id="loadingSection" class="loading">
        <div class="spinner"></div>
        <p>正在生成登机牌...</p>
    </div>
    
    <!-- 登机牌 -->
    <div id="boardingPass" class="boarding-pass">
        <!-- 航空公司头部 -->
        <div class="airline-header">
            <div class="airline-logo">✈️</div>
            <div class="airline-name">TRAVEL</div>
            <div class="boarding-pass-title">BOARDING PASS</div>
        </div>
        
        <!-- 乘客信息 -->
        <div class="passenger-info">
            <div class="passenger-name" id="passengerName">-</div>
            <div class="eticket">ELECTRONIC TICKET</div>
        </div>
        
        <!-- 航班信息 -->
        <div class="flight-info-container">
            <div class="flight-row">
                <div class="flight-info">
                    <div class="info-label">Flight / 航班</div>
                    <div class="info-value">AA0011</div>
                </div>
                <div class="flight-info">
                    <div class="info-label">Date / 日期</div>
                    <div class="info-value" id="flightDate">-</div>
                </div>
            </div>
            <div class="flight-row">
                <div class="flight-info">
                    <div class="info-label">Boarding Time / 登机时间</div>
                    <div class="info-value">01:01</div>
                </div>
                <div class="flight-info">
                    <div class="info-label">Seat / 座位</div>
                    <div class="info-value">01</div>
                </div>
            </div>
        </div>
        
        <!-- 行程信息 -->
        <div class="route-container">
            <div class="airport" id="departureAirport">
                <div class="airport-code">-</div>
                <div class="airport-name" id="departureCity">出发地</div>
            </div>
            
            <div class="flight-arrow">→</div>
            
            <div class="airport" id="arrivalAirport">
                <div class="airport-code">-</div>
                <div class="airport-name" id="arrivalCity">目的地</div>
            </div>
        </div>
        
        <!-- 登机信息 -->
        <div class="boarding-info">
            <div class="boarding-item">
                <div class="info-label">Gate / 登机口</div>
                <div class="info-value">01</div>
            </div>
            <div class="boarding-item">
                <div class="info-label">Seat / 座位</div>
                <div class="info-value">01</div>
            </div>
            <div class="boarding-item">
                <div class="info-label">Sequence / 序号</div>
                <div class="info-value">01</div>
            </div>
        </div>
        
        <!-- 条码和二维码区域 -->
        <div class="barcode-section">
            <div class="barcode" id="barcode"></div>
            <div class="qrcode-container" id="qrcode"></div>
            <div class="scan-text">扫描条码或二维码显示：新婚快乐，玩的开心！</div>
        </div>
    </div>
    
    <!-- 操作按钮 -->
    <div class="action-buttons" style="display: none;" id="actionButtons">
        <button onclick="saveTicket()" class="action-btn save-btn">保存图片</button>
        <button onclick="newTicket()" class="action-btn new-btn">重新生成</button>
    </div>

    <!-- 二维码生成库 -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <script>
        // 机场代码映射（前3位字母）
        const airportCodes = {
            '北京': 'PEK',
            '上海': 'SHA',
            '广州': 'CAN',
            '深圳': 'SZX',
            '成都': 'CTU',
            '重庆': 'CKG',
            '杭州': 'HGH',
            '南京': 'NKG',
            '武汉': 'WUH',
            '西安': 'XIY',
            '天津': 'TSN',
            '青岛': 'TAO',
            '大连': 'DLC',
            '厦门': 'XMN',
            '福州': 'FOC',
            '长沙': 'CSX',
            '沈阳': 'SHE',
            '哈尔滨': 'HRB',
            '长春': 'CGQ',
            '昆明': 'KMG'
        };
        
        // 页面加载完成
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Travel Airlines登机牌生成器已加载');
            
            // 获取元素
            const formContainer = document.querySelector('.form-container');
            const loadingSection = document.getElementById('loadingSection');
            const boardingPass = document.getElementById('boardingPass');
            const actionButtons = document.getElementById('actionButtons');
            const submitBtn = document.getElementById('submitBtn');
            
            // 提交按钮点击事件
            submitBtn.addEventListener('click', generateBoardingPass);
            
            // 生成登机牌函数
            function generateBoardingPass() {
                // 获取输入值
                const name = document.getElementById('name').value.trim();
                const fromCity = document.getElementById('fromCity').value.trim();
                const toCity = document.getElementById('toCity').value.trim();
                
                // 验证输入
                if (!name || !fromCity || !toCity) {
                    alert('请填写所有信息');
                    return;
                }
                
                // 显示加载动画
                formContainer.style.display = 'none';
                loadingSection.style.display = 'block';
                
                // 生成日期
                const today = new Date();
                const tomorrow = new Date(today);
                tomorrow.setDate(tomorrow.getDate() + 1);
                const formattedDate = `${tomorrow.getFullYear()}/${(tomorrow.getMonth() + 1).toString().padStart(2, '0')}/${tomorrow.getDate().toString().padStart(2, '0')}`;
                
                // 更新登机牌信息
                document.getElementById('passengerName').textContent = name;
                document.getElementById('flightDate').textContent = formattedDate;
                
                // 获取机场代码
                const fromCode = airportCodes[fromCity] || fromCity.substring(0, 3).toUpperCase();
                const toCode = airportCodes[toCity] || toCity.substring(0, 3).toUpperCase();
                
                // 更新出发地
                document.getElementById('departureAirport').innerHTML = `
                    <div class="airport-code">${fromCode}</div>
                    <div class="airport-name">${fromCity}</div>
                `;
                
                // 更新目的地
                document.getElementById('arrivalAirport').innerHTML = `
                    <div class="airport-code">${toCode}</div>
                    <div class="airport-name">${toCity}</div>
                `;
                
                // 生成条形码
                generateBarcode();
                
                // 生成二维码
                generateQRCode();
                
                // 2秒后显示登机牌
                setTimeout(() => {
                    loadingSection.style.display = 'none';
                    boardingPass.classList.add('show');
                    actionButtons.style.display = 'flex';
                    
                    // 滚动到登机牌位置
                    boardingPass.scrollIntoView({ behavior: 'smooth' });
                    
                }, 2000);
            }
            
            // 生成条形码（模拟）
            function generateBarcode() {
                const barcode = document.getElementById('barcode');
                barcode.innerHTML = '';
                
                // 创建条形码线条
                for (let i = 0; i < 50; i++) {
                    const line = document.createElement('div');
                    line.style.display = 'inline-block';
                    line.style.height = `${40 + Math.random() * 40}px`;
                    line.style.width = '2px';
                    line.style.backgroundColor = '#000';
                    line.style.marginRight = '1px';
                    line.style.verticalAlign = 'bottom';
                    barcode.appendChild(line);
                }
            }
            
            // 生成二维码
            function generateQRCode() {
                const qrData = "新婚快乐，玩的开心！";
                const qrcodeContainer = document.getElementById('qrcode');
                qrcodeContainer.innerHTML = '';
                
                try {
                    QRCode.toCanvas(qrcodeContainer, qrData, {
                        width: 150,
                        margin: 1,
                        color: {
                            dark: '#000000',
                            light: '#FFFFFF'
                        }
                    });
                } catch (error) {
                    console.error('二维码生成失败:', error);
                    qrcodeContainer.innerHTML = '<p>二维码生成失败</p>';
                }
            }
            
            // 保存机票
            window.saveTicket = function() {
                alert('保存功能需要html2canvas库支持\n您可以使用截图工具（Windows: Win+Shift+S, Mac: Shift+Command+4）保存图片');
            };
            
            // 重新生成
            window.newTicket = function() {
                formContainer.style.display = 'block';
                boardingPass.classList.remove('show');
                actionButtons.style.display = 'none';
                
                // 滚动到表单
                formContainer.scrollIntoView({ behavior: 'smooth' });
            };
            
            // 回车键提交
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    generateBoardingPass();
                }
            });
        });
    </script>
</body>
</html>